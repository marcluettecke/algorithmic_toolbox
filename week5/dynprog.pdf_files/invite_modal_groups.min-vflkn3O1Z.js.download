define(["require","exports","tslib","react","modules/core/i18n","dig-components/buttons","dig-components/tooltips","dig-components/icons/src","dig-components/modal","dig-components/typography","dig-components/icons","modules/clean/components/loading_indicator","modules/clean/react/css","modules/clean/teams/admin/widgets/groups/groups_typeahead","modules/clean/teams/admin/widgets/invite_modal/email_tokenizer","modules/clean/teams/admin/widgets/groups/create_group_modal","modules/clean/validators/email_validator"],(function(e,t,n,a,o,r,l,i,s,u,d,c,m,f,p,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),_=n.__importDefault(_);var v={email:{title:a.default.createElement(u.Text,{isBold:!0},o._("Email addresses")),valid:function(e){return e.every((function(e){return _.default.validate(e).every((function(e){return e.valid}))}))},error:o._("One or more names or email addresses you entered is incorrect")},groups:{title:a.default.createElement("div",null,o.intl.formatMessage(o._("<text>Add members to groups</text> <faint>(Optional)</faint>"),{text:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.default.createElement(u.Text,{isBold:!0},e)},faint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.default.createElement(u.Text,{color:"faint"},e)}})),valid:function(e){return e.every((function(e){return"default"===e}))},error:o._("Group name incomplete"),tooltip:a.default.createElement(l.Tooltip,{className:"group-row-tooltip",title:o._("Easily grant and restrict access by organizing members of your team into groups.")},a.default.createElement("div",{className:"group-row-tooltip__content"},a.default.createElement(d.UIIcon,{className:"middle-align",src:i.InfoLine})))}},E=function(e){var t=e.title,n=e.submitted,o=e.valid,r=e.values,l=e.error,i=e.children,s=e.tooltip;return a.default.createElement(a.default.Fragment,null,t,a.default.createElement("div",{className:"tooltip-container"},i,s),n&&!o(r)?a.default.createElement(u.Text,{className:"validation-msg",color:"error"},l):null)};t.GroupsInviteModal=m.requireCssWithComponent((function(e){var t,l=e.open,i=e.isSubmitting,d=void 0!==i&&i,m=e.memberList,_=e.handleOnClose,h=e.sendInvites,y=e.handleCSVImport,C="invite-modal-groups",b=a.useState({emails:[],groups:[]}),I=b[0],S=b[1],x=a.useState([]),M=x[0],N=x[1],w=a.useState(!1),B=w[0],T=w[1],L=a.useState(!1),k=L[0],G=L[1];a.useEffect((function(){S({emails:[],groups:[]})}),[l]),a.useEffect((function(){f.fetchGroups().then((function(e){return e.length&&N((function(t){return n.__spreadArrays(t,e)}))}))}),[]),a.useEffect((function(){d&&G(!0)}),[d]);var O=function(e){return N((function(t){return n.__spreadArrays(t,[e]).sort((function(e,t){return e.group_name.localeCompare(t.group_name)}))}))};return B?a.default.createElement(g.CreateGroupModal,{open:B,handleOnClose:function(e){T(!1),e&&!f.groupExists(I.groups,e.group_name)&&(O(e),S(n.__assign(n.__assign({},I),{groups:n.__spreadArrays(I.groups,[e])})))}}):a.default.createElement(s.Modal,{open:l,className:C,overlayClassName:C+"__overlay",withCloseButton:o._("Close Modal"),onRequestClose:function(){return _()}},a.default.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},a.default.createElement(u.Title,null,o._("Invite team members"))),a.default.createElement(s.Modal.Body,{className:C+"__body"},a.default.createElement(E,n.__assign({},v.email,{values:I.emails,submitted:k}),a.default.createElement(p.EmailTokenizer,{placeholder:I.emails.length?o._("Who else?"):o._("a@mail.com, b@mail.com, ..."),emails:I.emails,memberList:m,onChange:function(e){return S(n.__assign(n.__assign({},I),{emails:e}))}})),a.default.createElement(E,n.__assign({},v.groups,{values:I.groups.map((function(e){return e.variant})),submitted:k}),a.default.createElement(f.GroupsTypeahead,{groups:I.groups,options:M,onCreate:O,onChange:function(e){return S(n.__assign(n.__assign({},I),{groups:e}))},handleCreateModal:function(e){return T(e)}}))),a.default.createElement(s.Modal.Footer,null,y&&a.default.createElement(r.Button,{variant:"transparent",onClick:function(){return y()}},o._("Import CSV")),a.default.createElement(r.Button,{variant:"outline",onClick:function(){return _()}},o._("Cancel")),a.default.createElement(r.Button,{variant:"primary",onClick:function(){return h(I.emails,I.groups.map((function(e){return e.group_id})))},disabled:!(null===(t=I.emails)||void 0===t?void 0:t.length)},o._("Send invites"),d&&a.default.createElement(c.LoadingIndicator,{style:c.LoadingIndicator.LoadingIndicatorStyle.SPINNER}))))}),["/static/css/dig-components/index.web-vflm0_tak.css","/static/css/teams/admin/widgets/invite_modal/invite_modal_groups-vflE1ldTV.css"])}));
//# sourceMappingURL=invite_modal_groups.min.js-vfl0Cs_b4.map