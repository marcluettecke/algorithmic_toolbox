define(["require","exports","tslib","immutable","react","modules/clean/auth/login_or_register/types","modules/clean/filepath","modules/clean/react/file_viewer/constants","modules/clean/react/share_download/actions","modules/core/i18n"],(function(e,o,t,r,n,a,i,s,l,c){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),r=t.__importStar(r),n=t.__importDefault(n),i=t.__importStar(i),l=t.__importStar(l);var d={text:void 0,handler:void 0,spriteName:void 0,isDisabled:void 0,userAction:void 0},u=(function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return t.__extends(r,o),r.buildDirectOption=function(o,i){var d=this;return void 0===i&&(i=null),new r({text:c._("Direct download"),handler:function(){return t.__awaiter(d,void 0,void 0,(function(){var r=this;return t.__generator(this,(function(s){switch(s.label){case 0:return[4,l.direct(o,i)];case 1:return s.sent(),i===a.LoginOrRegisterKind.POSTDOWNLOAD&&(function(){return t.__awaiter(r,void 0,void 0,(function(){var r,a,i;return t.__generator(this,(function(s){switch(s.label){case 0:return[4,Promise.all([new Promise((function(o,t){e(["modules/clean/react/modal"],o,t)})).then(t.__importStar),new Promise((function(o,t){e(["modules/clean/react/file_viewer/conversions/post-download-modal"],o,t)})).then(t.__importStar)])];case 1:return r=s.sent(),a=r[0].Modal,i=r[1].PostDownloadModal,a.showInstance(n.default.createElement(i,{showModal:!0,sharedLinkInfo:o})),[2]}}))}))})(),[2]}}))}))},spriteName:"download_arrow",userAction:s.UserAction.Download})},r.buildToDropboxOption=function(e,o,t,a,d,u){void 0===u&&(u=!1);var _=c._("Save to my Dropbox"),m="dropbox",f=s.UserAction.SaveToDropbox;if(a&&a.is_cdm_member){var p=i.filename(a.cdm_tmf_path);_=p.length>12?c._("Save to my member folder"):c.intl.formatMessage(c._("Save to <strong>%(cdm_tmf_name)s</strong> folder"),{cdm_tmf_name:p,strong:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return n.default.createElement("strong",null,e)}}),t.is_paired&&(m="s_briefcase",f=s.UserAction.SaveToDropboxWork)}else if(t.is_paired)switch(d){case"personal":_=c._("Save to personal Dropbox"),m="s_house",f=s.UserAction.SaveToDropboxPersonal;break;case"work":_=c.intl.formatMessage(c._("Save to %(team_name)s Dropbox"),{team_name:t.team_name}),m="s_briefcase",f=s.UserAction.SaveToDropboxWork}return new r({text:_,handler:function(){l.toDropbox(e,o,d,a)},spriteName:m,isDisabled:u,userAction:f})},r})(r.Record(d));o.ShareDownloadActionOption=u}));
//# sourceMappingURL=models.min.js-vflzkUXHY.map